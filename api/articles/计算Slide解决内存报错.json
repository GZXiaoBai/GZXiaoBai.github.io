{"title":"计算Slide解决内存报错","uid":"eaf8c1b5d46487d5611ad86bbf92bf5f","slug":"计算Slide解决内存报错","date":"2020-06-06T04:38:14.000Z","updated":"2021-05-02T10:47:08.188Z","comments":true,"path":"api/articles/计算Slide解决内存报错.json","keywords":null,"cover":"https://i.loli.net/2021/05/02/mi7RueDwVqyZ8Q6.png","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>如果你在安装黑苹果的过程中，遇到了内存报错，那么你可能需要通过<strong>计算Slide值并注入</strong>来解决这个问题</p>\n<span id=\"more\"></span>\n<p>**KASLR (Kernel Address Space Layout Randomization)**：内核地址空间布局随机化，是 macOS 所使用的一项内存管理技术，它会在内存基址上加一个 Slide 值，用于保护内核安全。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Slide 的有效范围是 8 - 255，转化为 16 进制就是 8 - FF ，乘 200000（16 进制）得出的内存基址 Start 范围为 1000000 - 1FE00000</p></blockquote>\n<h1 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h1><p>如果你遇到如下代码，在安装过程中。</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\">Error allocating 0x0x116F6 pages at 0x00000000093eb000 alloc type 2</code></pre>\n\n<p>那么恭喜，这是内存报错，对于笔记本而言，一般可以通过更换<strong>内存补丁</strong>来解决。但对于自由度较高的台式机来说，就没那么好了，那么我们就来计算<strong>Slide值</strong>，启用<strong>KASLR</strong>内存管理技术了。</p>\n<h1 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h1><p>我们继续看上面的那一串代码，我们需要记录的就是<strong>0x0x116F6</strong>，也就是<strong>Page值</strong></p>\n<p>进入 <strong>clover</strong>，打开 <strong>UEFI Shell 64</strong> 界面，输入 <strong>memmap -b</strong>，找到第一个 <strong>Star</strong>t 大于 <strong>1000000</strong>（<strong>对应 Slide 最小值 8</strong>）且 <strong>Page</strong> 值大于 <strong>0x116F6</strong> （<strong>出错的 Page 值</strong>） 的 <strong>Available</strong> 类型数据，如下所示</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\">Available 00000000 1000B000 00000000 5F04FFFF 00000000 0004F045 00000000 0000000F</code></pre>\n\n<p>可见 <strong>1000B000</strong> 在这个范围内，使用<strong>十六进制计算器</strong>用这个值除 <strong>200000</strong>（<strong>16 进制</strong>）得出的值<strong>转为十进制向上取整</strong>即可</p>\n<p>例如 例如 <strong>1000B000（十六进制）/ 200000（十六进制）= 128.02（十进制）向上取整为 129</strong>，接下来我们将 <strong>slide=129</strong> 添加到引导参数中，问题基本上都能解决</p>\n<p>在线十六进制计算器：<a href=\"http://www.99cankao.com/digital-computation/hex-calculator.php\">点我！</a></p>\n<h1 id=\"参考教程\"><a href=\"#参考教程\" class=\"headerlink\" title=\"参考教程\"></a>参考教程</h1><p><a href=\"https://xstar-dev.github.io/hackintosh_primary/Memory_Exception.html\">XStar-Dev’s Blog</a></p>\n","text":"前言如果你在安装黑苹果的过程中，遇到了内存报错，那么你可能需要通过计算Slide值并注入来解决这个问题 **KASLR (Kernel Address Space Layout Randomization)**：内核地址空间布局随机化，是 macOS 所使用的一项内存管理技术，它...","link":"","photos":[],"count_time":{"symbolsCount":905,"symbolsTime":"1 mins."},"categories":[{"name":"技术","slug":"技术","count":10,"path":"api/categories/技术.json"}],"tags":[{"name":"黑苹果","slug":"黑苹果","count":7,"path":"api/tags/黑苹果.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">问题</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">解决方案</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E6%95%99%E7%A8%8B\"><span class=\"toc-text\">参考教程</span></a></li></ol>","author":{"name":"神楽小白(GZ小白)的部落阁","slug":"blog-author","avatar":"https://i.loli.net/2021/05/15/QdcDz8P721AfEMR.jpg","link":"/","description":"这是一个正常的人(确信)!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"/svg/github.svg","link":"https://github.com/GZXiaoBai"},"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/355276854"}}}},"mapped":true,"prev_post":{"title":"Mac个性化和美化","uid":"191467fb53ec3e3cd08be79cb2401a49","slug":"Mac个性化和美化","date":"2020-06-20T10:58:03.000Z","updated":"2021-05-22T10:31:02.435Z","comments":true,"path":"api/articles/Mac个性化和美化.json","keywords":null,"cover":"https://i.loli.net/2021/05/22/rpt1XBfWQJa5Osn.jpg","text":"前言Mac这一高端大气上档次的系统，其中一点就是十分简洁美观，那我这次就教大家如何让自己的Mac独特一些。 准备你需要准备以下软件： PlistEdit Pro（用于修改文字） ThemeEngine（用于修改图标） 我这里也提供软件下载： 百度网盘 密码: gtu4 修改我们需...","link":"","photos":[],"count_time":{"symbolsCount":603,"symbolsTime":"1 mins."},"categories":[{"name":"技术","slug":"技术","count":10,"path":"api/categories/技术.json"}],"tags":[{"name":"系统","slug":"系统","count":2,"path":"api/tags/系统.json"}],"author":{"name":"神楽小白(GZ小白)的部落阁","slug":"blog-author","avatar":"https://i.loli.net/2021/05/15/QdcDz8P721AfEMR.jpg","link":"/","description":"这是一个正常的人(确信)!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"/svg/github.svg","link":"https://github.com/GZXiaoBai"},"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/355276854"}}}}},"next_post":{"title":"macOS下的QQ和微信小助手","uid":"da02edfa2e3396e5765aadc308e577fb","slug":"QQ和微信小助手","date":"2020-05-23T06:01:07.000Z","updated":"2021-05-02T10:55:45.441Z","comments":true,"path":"api/articles/QQ和微信小助手.json","keywords":null,"cover":"https://i.loli.net/2021/05/02/1uJdhHivsG3BpoY.jpg","text":"QQ小助手 3.3 中文版 (QQ消息防撤回及抢红包神器)QQ小助手 是一款 Mac QQ消息防撤回以及 Mac QQ 抢红包插件，还可以设置自动回复规则以及抢红包规则（抢红包群过滤以及红包关键字过滤）。Mac QQ抢红包支持群和个人红包，包括文字口令红包。 安装 QQ小助手下载...","link":"","photos":[],"count_time":{"symbolsCount":513,"symbolsTime":"1 mins."},"categories":[{"name":"技术","slug":"技术","count":10,"path":"api/categories/技术.json"}],"tags":[{"name":"软件分享","slug":"软件分享","count":1,"path":"api/tags/软件分享.json"}],"author":{"name":"神楽小白(GZ小白)的部落阁","slug":"blog-author","avatar":"https://i.loli.net/2021/05/15/QdcDz8P721AfEMR.jpg","link":"/","description":"这是一个正常的人(确信)!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"/svg/github.svg","link":"https://github.com/GZXiaoBai"},"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/355276854"}}}}}}