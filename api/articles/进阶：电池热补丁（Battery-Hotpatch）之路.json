{"title":"进阶：电池热补丁（Battery-Hotpatch）之路","uid":"0b0d58a227f41342a3d42cd20e4f9a94","slug":"进阶：电池热补丁（Battery-Hotpatch）之路","date":"2020-05-16T14:12:07.000Z","updated":"2021-05-04T08:40:14.205Z","comments":true,"path":"api/articles/进阶：电池热补丁（Battery-Hotpatch）之路.json","keywords":null,"cover":"https://i.loli.net/2021/05/02/WEqjSwnGl8LcAQB.png","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>在有了OpenCore的引导后，已经<strong>不在推荐使用DSDT</strong>了，况且，现在也是主要推广<strong>热补丁（HotPatch）</strong>，热补丁具有比DSDT更好的<strong>灵活性</strong>，于是便开始写这篇文章了。</p>\n<span id=\"more\"></span>\n\n<h1 id=\"准备步骤\"><a href=\"#准备步骤\" class=\"headerlink\" title=\"准备步骤\"></a>准备步骤</h1><p>首先，我们需要下载我提供的电池热补丁的样本（SSDT-BATT.dsl)。同时，我还准备了联想X260的电池热补丁作为例子。<br>链接如下：<a href=\"https://pan.baidu.com/s/1E85uJJGzq5EXUpcTTE-CDQ\">百度云</a>  <strong>密码:fn1v</strong><br>然后，准备你的DSDT或者SSDT（存储有EC缓冲区的，Embedded Controller Buffer）</p>\n<p>需要工具：<code>Hackintool，Maciasl，科学计算器（Mac自带）</code></p>\n<p>要求：最好有一定的电池的基础知识，详细看见我之前写的<a href=\"https://gzxiaobai.github.io/2020/05/16/%E4%B8%BA%E5%B0%8F%E7%99%BD%E8%AE%BE%E8%AE%A1%E7%9A%84%E7%94%B5%E6%B1%A0%E6%95%99%E7%A8%8B%EF%BC%88DSDT%EF%BC%89/\">电池DSDT的教程</a></p>\n<h1 id=\"初步动作\"><a href=\"#初步动作\" class=\"headerlink\" title=\"初步动作\"></a>初步动作</h1><p>打开热补丁样本，我们来进行一些修改。（按照我自己的习惯来的）</p>\n<p><img src=\"https://i.loli.net/2021/05/02/yqGiaW5O3YoShDN.png\"></p>\n<p>我们要修改的有三处：<br>1.DefinitionBlock的修改，将这里的<strong>ACDT</strong>改为自己<strong>DSDT开头DefinitionBlock里的第三项</strong><br>2.DefinitionBlock的修改，将最后的数值也改成自己DSDT里的<br>3.External引用路径里的EC路径，改成自己DSDT里的实际路径</p>\n<p><img src=\"https://i.loli.net/2021/05/02/d87ozBiXRUjbrIP.png\"></p>\n<p>这里我们有一处要修改：<br>1.Scope路径下，改为自己DSDT里的实际路径</p>\n<h1 id=\"16位和32位的处理\"><a href=\"#16位和32位的处理\" class=\"headerlink\" title=\"16位和32位的处理\"></a>16位和32位的处理</h1><p>这里的处理，其实与DSDT里的差不多。<br>我们先将Field复制到SSDT里<br><img src=\"https://i.loli.net/2021/05/02/nCh1BjQLyH5xmck.png\"></p>\n<p><img src=\"https://i.loli.net/2021/05/02/ZyLeIlPnU3CqW5N.png\"><br>像我这样复制下来，里面到内容不复制。<br><em><strong>注意⚠️：你不难发现，我这里有许多的Field，那是因为X260的DSDT里，就是像这样的分散的Field。因此，当你制作电池热补丁时，搜索EmbeddedControllerBuffer找到Field后，记得同时搜索Field的名称，比如，ECOR，看看有没有分散在其它地方的</strong></em></p>\n<p>复制过来后，我们需要将Field进行<strong>改名</strong>，比如，ECOR，我改为了ECOX，这样就不会与原ACPI里的发生冲突。</p>\n<p>热补丁与DSDT的拆分不同，我们直接将需要拆分的，拆好放到SSDT中，我们创建的Field下。</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">OperationRegion</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">ECOX</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">EmbeddedControl</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0100</span><span class=\"token punctuation\">)</span>\n<span class=\"token builtin\">Field</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">ECOX</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ByteAcc</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NoLock</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Preserve</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">RCB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">RCB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">FCB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">FCB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">ACB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">ACB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">VOB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">VOB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token builtin\">Field</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">ECOX</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ByteAcc</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NoLock</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Preserve</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">BMB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">BMB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token builtin\">Field</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">ECOX</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ByteAcc</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NoLock</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Preserve</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">DCB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">DCB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xAA</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">SNB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">SNB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token builtin\">Field</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">ECOX</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ByteAcc</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NoLock</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Preserve</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">CHB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">CHB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">CHB2</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n    <span class=\"token builtin\">CHB3</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>最后的结果就如上所示，正确拆分，正确计算偏移量。（这些都包含在我DSDT的教程中）</p>\n<p>接着我们在DSDT中搜索需要被拆分的字节，找到所在的Method，记下路径，然后在SSDT里，添加这个路径。<br>比如我们，发现GBIF这个Method里面有需要拆分的自己，观察所得，GBIF所在的路径为：</p>\n<p><code>_SB.PCI0.LPC.EC</code></p>\n<p>那么我们就在SSDT中加上这个Scope：</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Scope</span> <span class=\"token punctuation\">(</span>\\<span class=\"token constant\">_SB</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">PCI0</span><span class=\"token punctuation\">.</span><span class=\"token constant\">LPC</span><span class=\"token punctuation\">.</span><span class=\"token constant\">EC</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>然后，我们将GBIF这一整个Method复制到这个路径下，在对字节进行拆分。（以此类推，其它Method也是这么处理）</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">GBIF</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NotSerialized</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_OSI</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Darwin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">Acquire</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0xFFFF</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">BMB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">BMB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">ShiftRight</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0F</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">XOr</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Zero</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Multiply</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">FCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">FCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">FCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">FCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Multiply</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x14</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x05</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xC8</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">ElseIf</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x00030D40</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x04</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">SNB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">SNB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Name</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">SERN</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Buffer</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token string\">\"     \"</span>\n            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x04</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">While</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Add</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x30</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">SERN</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Decrement</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">SERN</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">RECB</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x09</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x04</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Name</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BTYP</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Buffer</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x05</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                 <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span>                   \n            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B4</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">CHB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">CHB1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">CHB2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">CHB3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">BTYP</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BTYP</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0B</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x05</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">RECB</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0C</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token builtin\">Else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xFFFFFFFF</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x05</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xFFFFFFFF</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token builtin\">Release</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token builtin\">Else</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">XBIF</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">GBST</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NotSerialized</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_OSI</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Darwin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">Acquire</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0xFFFF</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x02</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token builtin\">ElseIf</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">One</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token builtin\">Else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x07</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n        <span class=\"token builtin\">Else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x04</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">LEqual</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x07</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x07</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x04</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local3</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token builtin\">Else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">VOB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">VOB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local3</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Multiply</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">RCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">RCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">RCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">RCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">ACB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ACB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">LGreaterEqual</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x8000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Subtract</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x00010000</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token builtin\">Else</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">ElseIf</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">LNot</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Multiply</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x03E8</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local7</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Zero</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x03</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Release</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token builtin\">Else</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">XBST</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>如上所示，即为最后的处理结果。</p>\n<h1 id=\"32位以上字节的处理\"><a href=\"#32位以上字节的处理\" class=\"headerlink\" title=\"32位以上字节的处理\"></a>32位以上字节的处理</h1><p>步骤基本相同，也是搜索所需修改字节对应对Method，然后找到对应路径，添加到SSDT中。<br><em><strong>32位以上的，不需要Field下的更改，只需要改Method，进行RECB和WECB的处理</strong></em></p>\n<p>详细见DSDT教程中。</p>\n<p>以下为完整处理结果（其实也在上文Method的GBIF，GBST中）（包含了全部）</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Scope</span> <span class=\"token punctuation\">(</span>\\<span class=\"token constant\">_SB</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">PCI0</span><span class=\"token punctuation\">.</span><span class=\"token constant\">LPC</span><span class=\"token punctuation\">.</span><span class=\"token constant\">EC</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">RE1B</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NotSerialized</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">OperationRegion</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">ERM2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">EmbeddedControl</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Field</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">ERM2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ByteAcc</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NoLock</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Preserve</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token constant\">BYTE</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BYTE</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">RECB</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Serialized</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">ShiftRight</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Add</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x07</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x03</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Name</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">TEMP</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Buffer</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Add</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">While</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">LLess</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">RE1B</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">TEMP</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Increment</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Increment</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">TEMP</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token builtin\">OperationRegion</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">ECOX</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">EmbeddedControl</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0100</span><span class=\"token punctuation\">)</span>\n    <span class=\"token builtin\">Field</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">ECOX</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ByteAcc</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NoLock</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Preserve</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">RCB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">RCB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">FCB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">FCB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">ACB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">ACB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">VOB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">VOB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token builtin\">Field</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">ECOX</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ByteAcc</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NoLock</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Preserve</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">BMB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">BMB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token builtin\">Field</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">ECOX</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ByteAcc</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NoLock</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Preserve</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">DCB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">DCB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xAA</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">SNB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">SNB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token builtin\">Field</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">ECOX</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ByteAcc</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NoLock</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Preserve</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">Offset</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">CHB0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">CHB1</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">CHB2</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> \n        <span class=\"token builtin\">CHB3</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">GBIF</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NotSerialized</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_OSI</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Darwin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Acquire</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0xFFFF</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">BMB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">BMB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">ShiftRight</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0F</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">XOr</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Zero</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Multiply</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">FCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">FCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token builtin\">Else</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">FCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">FCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Multiply</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token builtin\">Else</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x14</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x05</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xC8</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token builtin\">ElseIf</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x00030D40</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token builtin\">Else</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x04</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">SNB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">SNB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Name</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">SERN</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Buffer</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token string\">\"     \"</span>\n                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x04</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">While</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token builtin\">Add</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x30</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">SERN</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token builtin\">Decrement</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">SERN</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">RECB</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x09</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x04</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Name</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BTYP</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Buffer</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x05</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                     <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span>                   \n                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B4</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">CHB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">CHB1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">CHB2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">CHB3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">BTYP</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BTYP</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0B</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x05</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">RECB</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0C</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xFFFFFFFF</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x05</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xFFFFFFFF</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Release</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token builtin\">Else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">XBIF</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">GBST</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NotSerialized</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_OSI</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Darwin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Acquire</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0xFFFF</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x02</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">ElseIf</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">One</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x07</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x04</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">LEqual</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x07</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x07</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x04</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local3</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">VOB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">VOB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local3</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Multiply</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">RCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">RCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token builtin\">Else</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">RCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">RCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">ACB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">ACB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">LGreaterEqual</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x8000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">&#123;</span>\n                        <span class=\"token builtin\">Subtract</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x00010000</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">&#125;</span>\n                    <span class=\"token builtin\">Else</span>\n                    <span class=\"token punctuation\">&#123;</span>\n                        <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token builtin\">ElseIf</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">LNot</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">And</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n\n                <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token builtin\">Multiply</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x03E8</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local7</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Zero</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x03</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Release</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token builtin\">Else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">XBST</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>可以对照给出的X260的热补丁看看</p>\n<h1 id=\"排错，补充引用声明\"><a href=\"#排错，补充引用声明\" class=\"headerlink\" title=\"排错，补充引用声明\"></a>排错，补充引用声明</h1><p>完成这些步骤后，点击编译会发现错误<br><img src=\"https://i.loli.net/2021/05/02/tUBnsOqaxWFMzgh.png\"></p>\n<p>这些都是因为没有被定义，因此我们需要进行引用，来排除这些错误。<br>以BATM为例，在DSDT中进行搜索，找到它被定义的路径和类型，写成External</p>\n<p><code>External (_SB.PCI0.LPC.EC_BATM, MutexObj)</code></p>\n<p>前者为路径，后者为类型</p>\n<p>更多详见如下：</p>\n<p>以下摘自iStar的博客：<br>Device：原始 ACPI 定义示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Scope</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_SB</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">PCI0</span><span class=\"token punctuation\">.</span><span class=\"token constant\">LPCB</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin\">Device</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">H_EC</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>补丁中添加的代码示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">External</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_SB_</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">PCI0</span><span class=\"token punctuation\">.</span><span class=\"token constant\">LPCB</span><span class=\"token punctuation\">.</span><span class=\"token constant\">H_EC</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DeviceObj</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>Method：原始 ACPI 定义示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_STA</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NotSerialized</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">/* _STA: Status */</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>补丁中添加的代码示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">External</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_SB_</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">BAT0</span><span class=\"token punctuation\">.</span><span class=\"token constant\">_STA</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">MethodObj</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>Mutex：原始 ACPI 定义示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Mutex</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x07</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>补丁中添加的代码示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">External</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_SB_</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">PCI0</span><span class=\"token punctuation\">.</span><span class=\"token constant\">LPCB</span><span class=\"token punctuation\">.</span><span class=\"token constant\">H_EC</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">MutexObj</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>FieldUnit：原始 ACPI 定义示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token function\">Field</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token constant\">BCNT</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>补丁中添加的代码示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">External</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_SB_</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">PCI0</span><span class=\"token punctuation\">.</span><span class=\"token constant\">LPCB</span><span class=\"token punctuation\">.</span><span class=\"token constant\">H_EC</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BCNT</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">FieldUnitObj</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>Integer：原始 ACPI 定义示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Name</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">ECA2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Zero</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>补丁中添加的代码示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">External</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_SB_</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">PCI0</span><span class=\"token punctuation\">.</span><span class=\"token constant\">LPCB</span><span class=\"token punctuation\">.</span><span class=\"token constant\">H_EC</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">ECA2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">IntObj</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>Package：原始 ACPI 定义示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Name</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">PBIF</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Package</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x0D</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin\">One</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">0xFFFFFFFF</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">0xFFFFFFFF</span><span class=\"token punctuation\">,</span>\n    <span class=\"token builtin\">One</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">0xFFFFFFFF</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">0xFA</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">0x96</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">0x19</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"BAT0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\" \"</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>补丁中添加的代码示例</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">External</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_SB_</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">BAT0</span><span class=\"token punctuation\">.</span><span class=\"token constant\">PBIF</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">PkgObj</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h1 id=\"添加if判断语句\"><a href=\"#添加if判断语句\" class=\"headerlink\" title=\"添加if判断语句\"></a>添加if判断语句</h1><p>为了让自己修改的Method不会影响Windows系统，我们需要添加if判断语句，明确它的内容作用在哪个系统。</p>\n<p>如，在GBIF这个Method的第一个括号下加入<strong>If (_OSI (“Darwin”))</strong></p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"> <span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">GBIF</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NotSerialized</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">&#123;</span>\n     <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_OSI</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Darwin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">&#123;</span>\n         <span class=\"token builtin\">Acquire</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0xFFFF</span><span class=\"token punctuation\">)</span>\n         <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>然后，我们去到这个Method的尾部，看看这个Method，最后有没有返回（Return）<br>很显然这个GBIF有的，就是<strong>Return (Arg1)</strong><br>对于有返回语句的，我们需要在Else下加上Return，没有则不需要。</p>\n<p>Else部分自己加在Method末尾。</p>\n<p>最终结果如下：</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">GBIF</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NotSerialized</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_OSI</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Darwin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">Acquire</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0xFFFF</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">BMB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">BMB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">ShiftRight</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0F</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">XOr</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Zero</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Multiply</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">FCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">FCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">FCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">FCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Multiply</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DCB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DCB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x14</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x05</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">If</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local7</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xC8</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">ElseIf</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x00030D40</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token builtin\">Else</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">DVB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">DVB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x04</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B2</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">SNB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">SNB1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Name</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">SERN</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Buffer</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token string\">\"     \"</span>\n            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x04</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">While</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token builtin\">Divide</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Add</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x30</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">SERN</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin\">Decrement</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Local2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">SERN</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0A</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">RECB</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x09</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x04</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Name</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BTYP</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Buffer</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0x05</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                 <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span>                   \n            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">B1B4</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">CHB0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">CHB1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">CHB2</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">CHB3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">BTYP</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BTYP</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0B</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x05</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HIID</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">RECB</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xA0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x0C</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token builtin\">Else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xFFFFFFFF</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">One</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x05</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Zero</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x06</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token builtin\">Store</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0xFFFFFFFF</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Index</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token builtin\">Release</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">BATM</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token builtin\">Else</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token builtin\">Return</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">XBIF</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Arg0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Arg2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>我们发现，我将GBIF在Else中重命名为了XBIF，这需要与后面config里添加重命名对应。<br>那么，你们可能会有疑问，这个Arg0这些是这么来的？<br>这个需要观察：</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">GBIF</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NotSerialized</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>就是中间这个数字得来的，3的话就是在XBIF后面的括号里填写，Arg0， Arg1， Arg2。<br>是多少，你就从Arg0开始往后一个个按顺序加。0就不填，留空。</p>\n<p>添加完了这些后，你再编译，发现报错了，然后一样，补充引用声明。<br>如，</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">External</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">_SB</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">PCI0</span><span class=\"token punctuation\">.</span><span class=\"token constant\">LPC</span><span class=\"token punctuation\">.</span><span class=\"token constant\">EC</span><span class=\"token punctuation\">.</span><span class=\"token constant\">XBIF</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">MethodObj</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>这样就可以了。</p>\n<h1 id=\"重命名与Mutex检查\"><a href=\"#重命名与Mutex检查\" class=\"headerlink\" title=\"重命名与Mutex检查\"></a>重命名与Mutex检查</h1><p>最后，我们来进行重命名和Mutex检查<br>比如GBIF，我们来重命名为XBIF，这样就不会与ACPI中的GBIF冲突了<br>规则如下：<br><code>Comment：BAT GBIF to XBIF</code><br>利用Hackintool，将GBIF转换为16进制为：47424946<br>我们再补上两位，这两位就需要看Method了</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token builtin\">Method</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">GBIF</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">NotSerialized</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>NotSerialized代表0，Serialized代表8<br>我们将其相加，中间的数字+N或S<br>GBIF就是：3+0=3，3转换为16进制就是3<br>那么最后的两位就是03</p>\n<p>XBIF的16进制为：58424946</p>\n<p>完整的如下：<br><code>Comment：BAT GBIF to XBIF</code><br><code>Find：47424946 03</code><br><code>Replace：58424946 03</code></p>\n<p>GBST的就是：<br><code>Method (GBST, 4, NotSerialized)</code></p>\n<p><code>Comment：BAT GBST to XBST</code><br><code>Find：47425354 04</code><br><code>Replace：58425354 04</code></p>\n<p>把这些重命名加到Config里。</p>\n<p>你需要检查Mutex，确保他们全部为0 在当前使用的DSDT文件里搜索Mutex，看出现的几个变量是否为0，目前所知道的绝大多数机器的ACPI Mutex都是默认置0的，但是对于一些联想机器，它们往往有几个Mutex初始值并不是0，这里我们利用ACPI二进制更名的方法实现置0</p>\n<p>以Mutex (BATM, 0x07)为例，先转换BATM为十六进制代码，得到 42 41 54 4D</p>\n<p>在前后加上完整定义的十六进制代码，01代表Mutex，07则代表默认值，最终得到 01 42 41 54 4D 07</p>\n<p>我们的目的是使Mutex对象置0，所以config的更名应填</p>\n<p><code>Comment Set Mutex BATM, 0x07 to 0x0</code><br><code>Find 01 42 41 54 4D 07</code><br><code>Repalce 01 42 41 54 4D 00</code><br>其它Mutex对象按照同样的方法处理即可</p>\n<p>这样下来你的电池热补丁就基本制作完毕了，对于双电池系统的电池（实际只有一块电池的），我们需要禁用其中一个。</p>\n<h1 id=\"双电池系统，屏蔽其中一个\"><a href=\"#双电池系统，屏蔽其中一个\" class=\"headerlink\" title=\"双电池系统，屏蔽其中一个\"></a>双电池系统，屏蔽其中一个</h1><p>比如，你的DSDT中有BAT0或BAT1两个电池设备，但你实际只在用其中一个。那么，你先看看另一个是否开启，如果另一个也是开启的，你需要屏蔽它。</p>\n<p>参考我给的<strong>SSDT-BAT0-Disable-X260.aml</strong></p>\n<p><img src=\"https://i.loli.net/2021/05/02/IwkrJstTnhENlQ8.png\"></p>\n<p>将DefinitionBlock框出来的位置，改成自己的，同时修改External和Scope为自己所要屏蔽的电池设备的路径。</p>\n<p>然后保存即可。</p>\n<p>然后我们要对所屏蔽电池设备下的_STA进行更名：</p>\n<p><strong>CLOVER</strong>：处理比较简单，将所需屏蔽的电池设备，转换为16进制，比如BAT1（42415430）<br><code>Comment：BAT _STA to XSTA in BAT1</code><br><code>Find：5F535441</code><br><code>Replace：58535441</code><br><code>TgtBridge：42415431</code></p>\n<p><strong>OC</strong>：OpenCore因为没有TgtBridge，因此处理比较麻烦<br>1.选择使用skip，count：Skip为跳过，就看你所要更改的_STA上有几个一样的_STA就跳过几个，count是替换次数，填1次即可<br><code>Comment：BAT _STA to XSTA in BAT1</code><br><code>Find：5F535441</code><br><code>Replace：58535441</code><br><code>Skip:（填跳过的次数）</code><br><code>Count：1</code></p>\n<p>到这里，你已经做好一个电池热补丁和屏蔽补丁了，然后再加上ACPIBatteryManager.kext或者SMCBatteryManager.kext，不出问题，你就可以看到你可爱的电池图标了！<img src=\"https://i.loli.net/2021/05/02/xmjbo7Z3W4zGYeS.png\"><br><img src=\"https://i.loli.net/2021/05/02/kCFX1AwrJWH9lsa.png\"></p>\n","feature":true,"text":"前言在有了OpenCore的引导后，已经不在推荐使用DSDT了，况且，现在也是主要推广热补丁（HotPatch），热补丁具有比DSDT更好的灵活性，于是便开始写这篇文章了。 准备步骤首先，我们需要下载我提供的电池热补丁的样本（SSDT-BATT.dsl)。同时，我还准备了联想X2...","link":"","photos":[],"count_time":{"symbolsCount":"20k","symbolsTime":"18 mins."},"categories":[{"name":"技术","slug":"技术","count":9,"path":"api/categories/技术.json"}],"tags":[{"name":"黑苹果","slug":"黑苹果","count":6,"path":"api/tags/黑苹果.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%87%86%E5%A4%87%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">准备步骤</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%88%9D%E6%AD%A5%E5%8A%A8%E4%BD%9C\"><span class=\"toc-text\">初步动作</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#16%E4%BD%8D%E5%92%8C32%E4%BD%8D%E7%9A%84%E5%A4%84%E7%90%86\"><span class=\"toc-text\">16位和32位的处理</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#32%E4%BD%8D%E4%BB%A5%E4%B8%8A%E5%AD%97%E8%8A%82%E7%9A%84%E5%A4%84%E7%90%86\"><span class=\"toc-text\">32位以上字节的处理</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%8E%92%E9%94%99%EF%BC%8C%E8%A1%A5%E5%85%85%E5%BC%95%E7%94%A8%E5%A3%B0%E6%98%8E\"><span class=\"toc-text\">排错，补充引用声明</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0if%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">添加if判断语句</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%87%8D%E5%91%BD%E5%90%8D%E4%B8%8EMutex%E6%A3%80%E6%9F%A5\"><span class=\"toc-text\">重命名与Mutex检查</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8F%8C%E7%94%B5%E6%B1%A0%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%B1%8F%E8%94%BD%E5%85%B6%E4%B8%AD%E4%B8%80%E4%B8%AA\"><span class=\"toc-text\">双电池系统，屏蔽其中一个</span></a></li></ol>","author":{"name":"神楽小白(GZ小白)","slug":"blog-author","avatar":"https://i.loli.net/2021/05/04/OGWKkfxUaqrFARY.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":"https://github.com/GZXiaoBai","bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://space.bilibili.com/355276854"}}}},"mapped":true,"prev_post":{"title":"用热补丁修理你的触摸板（TouchPad-Hotpatch）","uid":"4f0dd3439efb7ba90d574e3fcd61c5dd","slug":"用热补丁修理你的触摸板（TouchPad-Hotpatch）","date":"2020-05-17T01:30:19.000Z","updated":"2021-05-04T08:40:20.998Z","comments":true,"path":"api/articles/用热补丁修理你的触摸板（TouchPad-Hotpatch）.json","keywords":null,"cover":"https://i.loli.net/2021/05/02/FZVbE4tw1kqgOez.jpg","text":"前言当你的触摸板无法正常工作时，或者一点也不工作时，那你可能就需要修改ACPI来修补修补你的触摸板来，使其能够正常工作。毕竟一台笔记本电脑，用不了触摸板实在是太难受了。（如果你有钱买妙控板，那就另当别论了） 确定设备路径1.进入Windows系统，打开设备管理器，找到人体输入学设...","link":"","photos":[],"count_time":{"symbolsCount":"28k","symbolsTime":"26 mins."},"categories":[{"name":"技术","slug":"技术","count":9,"path":"api/categories/技术.json"}],"tags":[{"name":"黑苹果","slug":"黑苹果","count":6,"path":"api/tags/黑苹果.json"}],"author":{"name":"神楽小白(GZ小白)","slug":"blog-author","avatar":"https://i.loli.net/2021/05/04/OGWKkfxUaqrFARY.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":"https://github.com/GZXiaoBai","bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://space.bilibili.com/355276854"}}}},"feature":true},"next_post":{"title":"Hackintosh安装全攻略","uid":"abffe26bc69808327979060f3d56b2b3","slug":"Hackintosh安装全攻略","date":"2020-05-16T14:09:02.000Z","updated":"2021-05-04T08:40:05.691Z","comments":true,"path":"api/articles/Hackintosh安装全攻略.json","keywords":null,"cover":"https://i.loli.net/2021/05/02/yGEk9xwH86jRo4X.jpg","text":"以下内容基本摘自Eternal Qiu的博客，日后准备进行修改链接：https://blog.qiuxiangzhi.top/2019/07/15/macOS-Guide/ 前言我打算写一个教程来引导小白入坑，不在本文介绍那些复杂需要折腾的驱动问题。 警告请注意，本贴只做技术与学...","link":"","photos":[],"count_time":{"symbolsCount":"4.3k","symbolsTime":"4 mins."},"categories":[{"name":"技术","slug":"技术","count":9,"path":"api/categories/技术.json"}],"tags":[{"name":"黑苹果","slug":"黑苹果","count":6,"path":"api/tags/黑苹果.json"}],"author":{"name":"神楽小白(GZ小白)","slug":"blog-author","avatar":"https://i.loli.net/2021/05/04/OGWKkfxUaqrFARY.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":"https://github.com/GZXiaoBai","bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://space.bilibili.com/355276854"}}}},"feature":true}}